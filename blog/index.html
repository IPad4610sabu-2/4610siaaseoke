<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* èƒŒæ™¯ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            background-image: url('https://th.bing.com/th/id/OIG2.Wnln.UlFDTVAyzs4L3a2?pid=ImgGn');
            background-size: cover;
            background-position: center;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .large-text {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            color: white;
            margin-top: 20px;
        }

        /* ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #followButton,
        #aboutBlankButton,
        #emergencyButton {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        /* ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼ã‚¹ã‚¿ã‚¤ãƒ« */
        #followButton:hover {
            background-color: #0056b3;
        }

        #aboutBlankButton {
            background-color: #28a745;
        }

        #aboutBlankButton:hover {
            background-color: #218838;
        }

        #emergencyButton {
            background-color: #dc3545;
        }

        #emergencyButton:hover {
            background-color: #c82333;
        }

        .blog-section {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
        }

        .comments {
            margin-top: 20px;
        }

        .comment {
            border-bottom: 1px solid #ccc;
            padding: 5px 0;
            position: relative;
        }

        .reaction-buttons {
            position: absolute;
            right: 0;
            top: 0;
        }

        .reaction-button {
            cursor: pointer;
            margin-left: 10px;
            background: transparent;
            border: none;
            color: #007bff;
            font-size: 18px;
        }

        .reaction-count {
            display: inline-block;
            margin-left: 5px;
        }

        .hidden-comments {
            display: none;
        }

        #showMoreButton {
            margin-top: 10px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .close-button {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            color: white;
            cursor: pointer;
        }
    </style>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, onSnapshot, updateDoc } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBYO7lc3tTKdNlK1wLjTTpneQL-zkYU3uA",
            authDomain: "chatapp-by-kbk.firebaseapp.com",
            databaseURL: "https://chatapp-by-kbk-default-rtdb.firebaseio.com",
            projectId: "chatapp-by-kbk",
            storageBucket: "chatapp-by-kbk.appspot.com",
            messagingSenderId: "254822225505",
            appId: "1:254822225505:web:1d8121702659a448fa7c20",
            measurementId: "G-ZPDHPNGVSN"
        };

        // Firebaseã®åˆæœŸåŒ–
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.addEventListener('DOMContentLoaded', () => {
            const blockedUsers = new Set();
            const blockOverlay = document.createElement('div');
            blockOverlay.classList.add('block-overlay');
            const blockText = document.createElement('div');
            blockText.classList.add('block-message-large');
            blockText.textContent = "ã‚ãªãŸã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚";
            blockOverlay.appendChild(blockText);
            document.body.appendChild(blockOverlay);

            const generateUserId = () => {
                const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
                let userId = '';
                for (let i = 0; i < 8; i++) {
                    userId += characters.charAt(Math.floor(Math.random() * characters.length));
                }
                return userId;
            };

            let userId = generateUserId();
            console.log("ãƒ¦ãƒ¼ã‚¶ãƒ¼ID:", userId);

            document.getElementById('followButton').onclick = async function () {
                const newUrl = 'https://neon.go4it.com.mx/';
                try {
                    const response = await fetch(newUrl, {
                        method: 'HEAD',
                        credentials: 'include'
                    });

                    if (response.ok) {
                        window.location.href = newUrl;
                    } else {
                        alert("ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸ: " + response.statusText);
                    }
                } catch (error) {
                    console.error("Error fetching new URL:", error);
                }
            };

            function openAboutBlank() {
                const currentUrl = window.location.href;
                const aboutBlankWindow = window.open('about:blank', '_blank');
                const content = `
                    <html>
                        <head>
                            <title>Embedded Site</title>
                            <style>
                                body { margin: 0; }
                                iframe { width: 100vw; height: 100vh; border: none; }
                            </style>
                        </head>
                        <body>
                            <iframe src="${currentUrl}" allowfullscreen></iframe>
                        </body>
                    </html>
                `;
                setTimeout(() => {
                    aboutBlankWindow.document.write(content);
                    aboutBlankWindow.document.close();
                }, 100);
            }

            document.getElementById('aboutBlankButton').onclick = openAboutBlank;
            const commentInput = document.getElementById('commentInput');
            const nameInput = document.getElementById('nameInput');
            const submitCommentButton = document.getElementById('submitComment');
            const commentList = document.getElementById('commentList');
            const showMoreButton = document.getElementById('showMoreButton');
            const passwordInput = document.getElementById('passwordInput');
            const deleteCommentsButton = document.getElementById('deleteCommentsButton');
            const emergencyButton = document.getElementById('emergencyButton');

            let allComments = [];
            let commentsVisible = 3;
            const password = 'https://youtube.com'; //ã‚¯ãƒªãƒƒã‚¯é–¢æ•°

            submitCommentButton.onclick = async function () {
                const name = nameInput.value.trim();
                const comment = commentInput.value.trim();

                if (!name || !comment) {
                    alert('åå‰ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                if (name.length > 30) {
                    alert('åå‰ã¯30æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                if (comment.length > 200) {
                    alert('ã‚³ãƒ¡ãƒ³ãƒˆã¯200æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                if (name.includes('ä¸»') || name.includes('ç®¡ç†è€…')) {
                    alert('ã€Œä¸»ã€ã¾ãŸã¯ã€Œç®¡ç†è€…ã€ã¨ã„ã†åå‰ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚ä»–ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                // ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒã‚§ãƒƒã‚¯
                if (blockedUsers.has(name)) {
                    blockOverlay.style.display = 'flex';
                    requestFullscreen(blockOverlay);
                    return;
                }

                const now = Date.now();

                const newCommentRef = await addDoc(collection(db, "comments"), {
                    name: name,
                    userId: userId,
                    comment: comment,
                    timestamp: now,
                    likes: 0,
                    anger: 0
                });

                allComments.push({ name, comment, timestamp: now, id: newCommentRef.id, userId: userId, likes: 0, anger: 0 });
                updateCommentDisplay();

                // ã‚³ãƒ¡ãƒ³ãƒˆãŒ50ä»¶ã‚’è¶…ãˆãŸå ´åˆã®å‰Šé™¤
                if (allComments.length >= 50) {
                    await deleteAllComments();
                }

                // ã‚³ãƒ¡ãƒ³ãƒˆé€ä¿¡å¾Œã«ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¯ãƒªã‚¢
                commentInput.value = '';
            };

            async function deleteAllComments() {
                const commentsSnapshot = await getDocs(collection(db, "comments"));
                const deletePromises = commentsSnapshot.docs.map(doc => deleteDoc(doc.ref));
                await Promise.all(deletePromises);
                alert('ã‚³ãƒ¡ãƒ³ãƒˆãŒ50ä»¶ã‚’è¶…ãˆãŸãŸã‚ã€ã™ã¹ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚');
                updateCommentDisplay();
            }

            onSnapshot(collection(db, "comments"), async (snapshot) => {
                allComments = [];

                for (const doc of snapshot.docs) {
                    const data = doc.data();
                    allComments.push({ ...data, id: doc.id });
                }

                allComments.sort((a, b) => b.timestamp - a.timestamp);
                updateCommentDisplay();

                if (allComments.length > commentsVisible) {
                    showMoreButton.classList.remove('hidden-comments');
                } else {
                    showMoreButton.classList.add('hidden-comments');
                }
            });

            showMoreButton.onclick = () => {
                commentsVisible = allComments.length;
                updateCommentDisplay();
                showMoreButton.classList.add('hidden-comments');
            };

            deleteCommentsButton.onclick = async function () {
                const inputPassword = passwordInput.value.trim();

                if (checkPassword(inputPassword)) {
                    await deleteAllComments();
                    passwordInput.value = '';
                    alert('å…¨ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
                } else {
                    alert('ç„¡åŠ¹ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã™ã€‚');
                }
            };

            function checkPassword(inputPassword) {
                return inputPassword === password;
            }

            emergencyButton.onclick = async function () {
                const emergencyPassword = prompt("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š");
                if (checkPassword(emergencyPassword)) {
                    const deleteInterval = setInterval(async () => {
                        const commentsSnapshot = await getDocs(collection(db, "comments"));
                        if (commentsSnapshot.size > 0) {
                            await deleteAllComments();
                        }
                    }, 1000);

                    setTimeout(() => {
                        clearInterval(deleteInterval);
                        alert('éå¸¸ç”¨æ©Ÿèƒ½ãŒçµ‚äº†ã—ã¾ã—ãŸã€‚');
                    }, 120000);
                } else {
                    alert('ç„¡åŠ¹ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã™ã€‚');
                }
            };

            function updateCommentDisplay() {
                commentList.innerHTML = '';
                const commentsToDisplay = allComments.slice(0, commentsVisible);

                commentsToDisplay.forEach((data) => {
                    const newComment = document.createElement('div');
                    newComment.classList.add('comment');
                    newComment.textContent = `${data.name} (èªè¨¼: ${data.userId}): ${data.comment}`;

                    const timestamp = new Date(data.timestamp).toLocaleString();
                    const timestampElement = document.createElement('div');
                    timestampElement.classList.add('timestamp');
                    timestampElement.textContent = `æŠ•ç¨¿æ—¥: ${timestamp}`;

                    const reactionButtons = document.createElement('div');
                    reactionButtons.classList.add('reaction-buttons');

                    const likeButton = document.createElement('button');
                    likeButton.classList.add('reaction-button');
                    likeButton.textContent = 'ğŸ‘';
                    likeButton.onclick = async () => {
                        data.likes++;
                        await updateDoc(doc(db, "comments", data.id), { likes: data.likes });
                        updateCommentDisplay();
                    };

                    const angerButton = document.createElement('button');
                    angerButton.classList.add('reaction-button');
                    angerButton.textContent = 'ğŸ˜¡';
                    angerButton.onclick = async () => {
                        data.anger++;
                        await updateDoc(doc(db, "comments", data.id), { anger: data.anger });
                        updateCommentDisplay();
                    };

                    const likeCount = document.createElement('span');
                    likeCount.classList.add('reaction-count');
                    likeCount.textContent = `(${data.likes})`;

                    const angerCount = document.createElement('span');
                    angerCount.classList.add('reaction-count');
                    angerCount.textContent = `(${data.anger})`;

                    reactionButtons.appendChild(likeButton);
                    reactionButtons.appendChild(likeCount);
                    reactionButtons.appendChild(angerButton);
                    reactionButtons.appendChild(angerCount);

                    newComment.appendChild(reactionButtons);
                    newComment.appendChild(timestampElement);
                    commentList.appendChild(newComment);
                });
            }

            function requestFullscreen(element) {
                if (element.requestFullscreen) {
                    element.requestFullscreen();
                } else if (element.mozRequestFullScreen) {
                    element.mozRequestFullScreen();
                } else if (element.webkitRequestFullscreen) {
                    element.webkitRequestFullscreen();
                } else if (element.msRequestFullscreen) {
                    element.msRequestFullscreen();
                }
            }

            blockOverlay.addEventListener('click', () => {
                blockOverlay.style.display = 'none';
                document.exitFullscreen();
            });
        });
    </script>
</head>

<body>

    <div class="large-text">made by minotaur</div>

    <button id="followButton">proxy_minotaurã‚’ãƒ•ã‚©ãƒ­ãƒ¼</button>
    <button id="aboutBlankButton">about:blankã‚’é–‹ã</button>
    <button id="emergencyButton">ä¸»å°‚ç”¨ã€€ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã‚’é–‰é–</button>

    <div class="blog-section">
        <h2>ãƒ–ãƒ­ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h2>
        <p>ã“ã“ã§ã¯ã€ã•ã¾ã–ã¾ãªå†…å®¹ã«ã¤ã„ã¦è©±ã—åˆã£ãŸã‚Šã€æ„è¦‹ã‚’å…±æœ‰ã—ãŸã‚Šã§ãã¾ã™ã€‚ãŠæ°—è»½ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ®‹ã—ã¦ãã ã•ã„ï¼proxy_minotaurã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã¨ã„ã†ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨YUKIã«é£›ã³ã¾ã™ã€‚è’ã‚‰ã—ã§ããªãã—ã¾ã—ãŸã€‚æ¥½ã—ãã‚„ã£ã¦ãã ã•ã„ã€‚è’ã‚‰ã—ã€å‘åŠ£ãªè¡¨ç¾ã€ã‚¹ãƒ‘ãƒ ãªã©ã¯ã“ã®ã‚µãƒ¼ãƒãƒ¼ã§ç¦æ­¢ã—ã¾ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã®å‰Šé™¤ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ç®¡ç†è€…ã«ãªã‚‹ã¨æ•™ãˆã¾ã™ã€‚scratchã‚¹ã‚¿ã‚¸ã‚ªã«æ¥ã¦ãã ã•ã„ã€‚<a href="https://scratch.mit.edu/studios/35713963/">ã“ã¡ã‚‰</a>ã«ã‚ˆãåƒ•ã®å½ç‰©ãŒã„ã¾ã™ãŒ(ä¸»ï¼‰ã£ã¦æ›¸ã„ã¦ã‚ã‚‹ã®ãŒæœ¬ç‰©ã§ã™ã€‚ï¼ˆãªã‚Šã™ã¾ã—å¯¾ç­–ï¼‰ã€‚ã“ã“ã‹ã‚‰ã‚ˆãèª­ã‚“ã§ãã ã•ã„â†’ã‚³ãƒ¡ãƒ³ãƒˆã®å‰Šé™¤ç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’çŸ¥ã£ã¦ã„ã‚‹äººã¯ç®¡ç†è€…ã¨ã¿ãªã—ã€åå‰ã®å¾Œã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨(ç®¡ç†è€…)ã¨è¡¨ç¤ºã•ã›ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã¤ãã‚Šã¾ã—ãŸã€‚ã¾ãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½ã‚’ã¤ã‘ã¾ã—ãŸã€‚è’ã‚‰ã—ã‚’ã™ã‚‹ã¨å³IPãƒãƒ³ã•ã‚Œã¾ã™ã€‚ä»²è‰¯ãã—ã¦ãã ã•ã„ã€‚å¤šåˆ†ã€htmlã‚³ãƒ¼ãƒ‰ã‚’ãƒãƒƒã‚­ãƒ³ã‚°ãªã©ã—ã¦ã€ï¼ˆä¸»ï¼‰ã¨è¡¨ç¤ºã•ã›ã¦ã„ã‚‹äººãŒã„ã¾ã™ãŒãã“ã¾ã§ã®æŠ€è¡“ãŒã‚ã‚Œã°è’ã‚‰ã—ã‚’ã—ãªã„ã¨ä¿¡ã˜ã€è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã¾ã™ã€‚</p>
        <div class="comments">
            <input type="text" id="nameInput" placeholder="åå‰ã‚’å…¥åŠ›" />
            <textarea id="commentInput" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›" rows="4"></textarea>

            <button id="submitComment">ã‚³ãƒ¡ãƒ³ãƒˆã‚’é€ä¿¡</button>
            <div id="commentList"></div>
            <button id="showMoreButton" class="hidden-comments">ã™ã¹ã¦è¡¨ç¤º</button>

            <!-- å‰Šé™¤ç”¨ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="delete-section">
                <input type="password" id="passwordInput" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" />
                <button id="deleteCommentsButton">ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤</button>
            </div>
        </div>
    </div>

</body>

</html>
</div> </div>  </body> </html>  <html lang="ja"> <head> </div> <script src="script.js"></script> </body> </html>
